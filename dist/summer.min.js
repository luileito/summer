/*! summer | Responsive text summarization | Luis Leiva, Sciling | 2018-03-13 */
!function(a){function b(a,b){if(a.nodeType!==Node.ELEMENT_NODE)return"";for(var d=[],e=a;e;){var f=c(e,!!b,e===a);if(!f)break;if(d.push(f),f.optimized)break;e=e.parentNode}return d.reverse(),d.join(" > ")}function c(a,b,c){function e(a){var b=a.getAttribute("class");return b?b.split(/\s+/g).filter(Boolean).map(function(a){return"$"+a}):[]}function f(a){return"#"+g(a)}function g(a){if(k(a))return a;var b=/^(?:[0-9]|-[0-9-]?)/.test(a),c=a.length-1;return a.replace(/./g,function(a,d){return b&&0===d||!j(a)?h(a,d===c):a})}function h(a,b){return"\\"+i(a)+(b?"":" ")}function i(a){var b=a.charCodeAt(0).toString(16);return 1===b.length&&(b="0"+b),b}function j(a){return/[a-zA-Z0-9_-]/.test(a)?!0:a.charCodeAt(0)>=160}function k(a){return/^-?[a-zA-Z_][a-zA-Z0-9_-]*$/.test(a)}if(a.nodeType!==Node.ELEMENT_NODE)return null;var l=a.getAttribute("id");if(b){if(l)return new d(f(l),!0);var m=a.nodeName.toLowerCase();if("body"===m||"head"===m||"html"===m)return new d(a.nodeName.toLowerCase(),!0)}var n=a.nodeName.toLowerCase();if(l)return new d(n.toLowerCase()+f(l),!0);var o=a.parentNode;if(!o||o.nodeType===Node.DOCUMENT_NODE)return new d(n.toLowerCase(),!0);for(var p=e(a),q=!1,r=!1,s=-1,t=o.children,u=0;(-1===s||!r)&&u<t.length;++u){var v=t[u];if(v!==a){if(!r&&v.nodeName.toLowerCase()===n.toLowerCase()){q=!0;var w=p,x=0;for(var y in w)++x;if(0!==x)for(var z=e(v),A=0;A<z.length;++A){var B=z[A];if(!w.indexOf(B)&&(delete w[B],!--x)){r=!0;break}}else r=!0}}else s=u}var C=n.toLowerCase();if(c&&"input"===n.toLowerCase()&&a.getAttribute("type")&&!a.getAttribute("id")&&!a.getAttribute("class")&&(C+='[type="'+a.getAttribute("type")+'"]'),r)C+=":nth-child("+(s+1)+")";else if(q)for(var D in p)C+="."+g(p[D].substr(1));return new d(C,!1)}function d(a,b){this.value=a,this.optimized=b||!1,this.toString=function(){return this.value}}a.document;a.CSSPath=b}(this),function(){function a(){var a=this;this.getSentences=function(b){var c=this.normalizeWhiteSpace(b),d=this.splitText(c);return d||(d=[c]),d.filter(a.isNotEmpty).map(a.normalizeWhiteSpace).map(a.capitalize).map(a.punctualize)},this.splitText=function(a){return a?a.match(/(.+?([A-Z].)[\.|\?](?:['")\\\s]?)+?\s?)/gim):""},this.normalizeWhiteSpace=function(a){return(a||"").replace(/[\s\t\n]+/g," ").trim()},this.isEmpty=function(a){return""===(a||"")},this.isNotEmpty=function(b){return!a.isEmpty(b)},this.capitalize=function(a){return a?a.charAt(0).toUpperCase()+a.slice(1):""},this.punctualize=function(a){return a?(a.match(/[!,;`'"\.\?>]$/)||(a+="."),a):""}}window.TextSplitter=new a}(),function(a){function b(a,b,c,d,e){this.outgoingNodes=a,this.linkProb=b,this.tolerance=c,this.callback=d,this.pageCount=Object.keys(this.outgoingNodes).length,this.coeff=(1-b)/this.pageCount,this.probabilityNodes=a instanceof Array?[]:{},this.incomingNodes=a instanceof Array?[]:{},this.debug=e,this.startRanking()}b.prototype.startRanking=function(){var a,b,c,d=1/this.pageCount,e=this.outgoingNodes;for(a in e){this.probabilityNodes[a]=d;for(b in e[a])c=e[a][b],this.incomingNodes[c]||(this.incomingNodes[c]=[]),this.incomingNodes[c].push(a)}this.debug&&this.reportDebug(1),this.iterate(1)},b.prototype.reportDebug=function(){},b.prototype.iterate=function(a){var b,c,d,e,f,g,h,i,j=[],k={};for(d in this.probabilityNodes){if(f=0,this.incomingNodes[d])for(e=0;e<this.incomingNodes[d].length;e++)b=this.probabilityNodes[this.incomingNodes[d][e]],c=this.outgoingNodes[this.incomingNodes[d][e]].length,f+=b/c;g=this.coeff+this.linkProb*f,h=this.probabilityNodes[d]+this.tolerance,i=this.probabilityNodes[d]-this.tolerance,g>=i&&h>=g&&(k[d]=g,j.push(g)),this.probabilityNodes[d]=g}return j.length==this.pageCount?this.outgoingNodes instanceof Array?this.callback(null,j):this.callback(null,k):(this.debug&&this.reportDebug(a),++a,this.iterate(a))},a.PageRank=b}(this),function(a){function b(){function a(a,b){var c=a.length,d=b.length;if(0===c)return d;if(0===d)return c;var e,f,g=[];for(e=c;e>=0;e--)g[e]=[];for(e=c;e>=0;e--)g[e][0]=e;for(f=d;f>=0;f--)g[0][f]=f;for(e=1;c>=e;e++){var h=a.charAt(e-1);for(f=1;d>=f;f++){if(e==f&&g[e][f]>4)return c;var i=b.charAt(f-1),j=h==i?0:1,k=g[e-1][f]+1,l=g[e][f-1]+1,m=g[e-1][f-1]+j;k>l&&(k=l),k>m&&(k=m),g[e][f]=k}}return g[c][d]}function b(b){var c=new Array;for(s in b){var d=new Array;for(t in b)d.push(a(b[s],b[t]));c.push(d)}return c}function c(a){return new PageRank(a,.85,1e-4,function(a){if(a)throw new Error(a)})}function d(a,b){for(var c=new Array,d=new Array,e=a.sort(),f=1;b>=f;f++)c.push(e[e.length-f]);for(var f=0;b>f;f++)for(var g=0;g<a.length;g++)if(c[f]==a[g]){var h=!1;if(d.length>0){for(k in d)if(d[k]==g){h=!0;break}if(h)continue;d.push(g)}else d.push(g);break}return d}function e(a,e){var f=b(a),g=c(f).probabilityNodes,h=d(g,e),j=[];for(i in h)for(s in a)h[i]==s&&j.push(a[s]);return j}return{summarize:e}}a.TextRank=new b}(this),function(a){function b(){function a(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push([c,a[c]]);return b.sort(function(a,b){return a[1]-b[1]}),b}function b(a,b){var d=a.split(" "),e=b.split(" "),f=c(d,e),g=(d.length+e.length)/2;return f.splice(0,g).length}function c(a,b){for(var c=0,d=0,e=[];c<a.length&&d<b.length;)a[c]<b[d]?c++:a[c]>b[d]?d++:(e.push(a[c]),c++,d++);return e}function d(b){var c,d=f(b),g=b.length,h=e(g),i=e(g),j={};h.forEach(function(a){c=0,i.forEach(function(b){a!==b&&(c+=d[a][b])});var e=b[a];j[e]=c});var k=a(j).reverse();return k.map(function(a){return a[0]})}function e(a){for(var b=[],c=0;a>c;c++)b.push(c);return b}function f(a){var c=a.length,d=e(c),f=e(c),g=[];return d.forEach(function(){cell=[],f.forEach(function(){cell.push(0)}),g.push(cell)}),d.forEach(function(c){f.forEach(function(d){g[c][d]=b(a[c],a[d])})}),g}function g(a,b){return d(a).slice(0,b)}return{summarize:g}}a.document;a.NaiveRank=new b}(this),function(a){function b(){function b(a,b){return b.filter(function(b){return a.indexOf(b)>-1})}function e(a){var b=CSSPath(a);return"undefined"==typeof x[b]&&(x[b]={text:g(a.innerText),html:g(a.innerHTML)}),x[b]}function f(a){var b=CSSPath(a);return x[b]||e(a)}function g(a){return(a+"").substr(0).trim()}function h(a,b){return a.cssText.match(b)?a.selectorText:!1}function i(b,d){for(var f=c.querySelectorAll(b),g=0;g<f.length;g++){var h=f[g];e(h);var i=a.getComputedStyle(h).getPropertyValue(d).trim();switch(d){case"--text-summary":var k=CSSPath(h);y[k]=i;break;case"--text-summary-algorithm":w.algorithm=j(i);break;case"--text-summary-target":w.targetElement=c.querySelector(i);break;case"--text-summary-list":w.listStyle=i;break;case"--text-summary-skip-max-words":w.skipMaxWords=parseInt(i,10);break;case"--text-summary-skip-min-words":w.skipMinWords=parseInt(i,10)}}}function j(b){var c=TextSplitter.capitalize(k(b));return a[c]}function k(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function l(a){return 0===a||a&&"none"!==a?"number"==typeof a?m(a):a.indexOf("sentence")>-1?(a=parseInt(a,10),m(a)):(a="%"===a.substr(-1)?parseInt(a,10)/100:parseFloat(a),n(a)):.99}function m(a){return o(a,0)}function n(a){return a=o(a,0,1),1===a&&(a-=.01),a}function o(a,b,c){return"undefined"!=typeof b&&b>a&&(a=b),"undefined"!=typeof c&&a>c&&(a=c),a}function p(a){var b="--text-summary",c=["","-algorithm","-target","-list","-skip-min-words","-skip-max-words"].map(function(a){return b+a});c.forEach(function(b){var c=h(a,b);i(c,b)})}function q(b){for(var c=0;c<b.length;c++){var d=b[c];if(d instanceof CSSStyleRule)p(d);else if(d instanceof CSSMediaRule){var e=a.matchMedia(d.media.mediaText);q(d.cssRules),e.addListener(function(){q(d.cssRules)})}}clearTimeout(v),v=setTimeout(r,10)}function r(){for(var a in y)if(y.hasOwnProperty(a)){var b=c.querySelector(a),d=y[a];w.summarize(b,d)}}function s(b,d){var e;if(a.find&&a.getSelection){c.designMode="on";var f=a.getSelection();for(f.collapse(b,0);a.find(d);)c.execCommand("HiliteColor",!1,"white"),f.collapseToEnd(),e=f.anchorNode.parentNode.innerHTML;c.designMode="off",f.removeAllRanges()}else b.createTextRange;return e&&u(e).length==d.length?e:d}function t(a,b){return d.innerHTML=a,s(d,b)}function u(a){return z.innerHTML=a,z.textContent||z.innerText||""}var v,w=this;if(this.standalone=!1,this.algorithm=TextRank,!this.algorithm)throw new Error("No summarization algorithm supplied.");if("function"!=typeof this.algorithm.summarize)throw new Error("The selected summarization algorithm does not follow the required API.");this.preserveOrder=!0,this.separator="\n",this.listStyle=null,this.skipMinWords=null,this.skipMaxWords=null,this.targetElement=!1,this.rankSentences=function(a,c){var d=w.getSentences(a);w.skipMinWords>0&&(d=d.filter(function(a){return a.split(" ").length>w.skipMinWords})),w.skipMaxWords>0&&(d=d.filter(function(a){return a.split(" ").length<w.skipMaxWords})),c=l(c);var e=c>=1?c:Math.ceil(d.length*c),g=w.algorithm.summarize(d,e);w.preserveOrder&&(g=b(g,d));var h=f(a);return g.map(t.bind(w,h.html))},this.getSentences=function(a,b){"string"==typeof a&&(a=c.querySelector(a));var d=f(a),e=TextSplitter.getSentences(d.text);return b?e.map(t.bind(w,d.html)):e},this.summarize=function(a,b){"string"==typeof a&&(a=c.querySelector(a));var d=w.targetElement;"string"==typeof d&&(d=c.querySelector(d)),d||(d=a);var e=w.rankSentences(a,b),f=e.join(w.separator);if(w.listStyle&&"none"!==w.listStyle){var g=e.map(function(a){return"<li>"+a+"</li>"}),h="ordered"===w.listStyle?"ol":"ul";f="<"+h+' class="text-summary">'+g.join(w.separator)+"</"+h+">"}return d.innerHTML=f,e},this.init=function(a){if(!(a instanceof Event))for(var b in a)a.hasOwnProperty(b)&&(w[b]=a[b]);if(!w.standalone)for(var d=c.styleSheets,e=0;e<d.length;e++){var f=d[e];if(!f.disabled)try{f.cssRules&&q(f.cssRules)}catch(g){}}};var x={},y={},z=c.createElement("div")}var c=a.document;if(!a.CSS||!a.CSS.supports("(--foo: 1)"))throw new Error("This browser does not support modern CSS standards.");var d=c.createElement("div");d.style.position="absolute",d.style.bottom="0px",d.style.left="-9999999px",c.addEventListener("DOMContentLoaded",function(){c.body.appendChild(d),a.setTimeout(a.Summer.init,0)}),a.Summer=new b}(this);